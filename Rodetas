FROM ubuntu:18.04
FROM ubuntu:16.04

LABEL maintainer="Rodetas" 

# Dependencias
RUN apt-get update && apt-get install -y \
    build-essential \
    cmake \
    git \
    qt5-default \
    sudo \
    protobuf-compiler \
    gcc \ 
    g++ \
    python3-pip \
    libzmqpp-dev \
    protobuf-compiler\
    libprotobuf-dev \
    libboost-all-dev\
    libgtkmm-3.0-dev

# python pip upgrade

RUN pip3 install --upgrade pip

# Probobuf installation

RUN sudo rm -rf /usr/include/google/protobuf
RUN sudo rm -rf /usr/lib/libprotobuf*
RUN sudo rm -rf /usr/bin/proto*
RUN sudo rm -rf /usr/local/include/google/protobuf
RUN sudo rm -rf /usr/local/lib/libprotobuf*
RUN sudo rm -rf /usr/local/bin/proto*
RUN sudo apt-get install -y \
    autoconf \ 
    automake \
    libtool \
    curl \
    make \
    g++ \
    unzip 

RUN curl -OL https://github.com/google/protobuf/releases/download/v3.6.1/protoc-3.6.1-linux-x86_64.zip

# Unzip

RUN unzip protoc-3.6.1-linux-x86_64.zip -d protoc3

# Move protoc to /usr/local/bin/

RUN sudo cp -r protoc3/bin/* /usr/local/bin/

# Move protoc3/include to /usr/local/include/

RUN sudo cp -r protoc3/include/* /usr/local/include/

#RUN sudo ldconfig

RUN curl -OL https://github.com/protocolbuffers/protobuf/releases/download/v3.6.1/protobuf-all-3.6.1.zip

# Unzip

RUN unzip protobuf-all-3.6.1.zip -d protobuf-all
WORKDIR /protobuf-all/protobuf-3.6.1

# Installation
RUN sudo ./configure
RUN make -j 4
RUN make check
RUN sudo make install
RUN sudo ldconfig
WORKDIR /

# VSS-Core Needed

RUN git clone https://github.com/VSS-SDK/VSS-Core
RUN cd VSS-Core
WORKDIR /VSS-Core
RUN ./configure.sh
RUN cd ..
WORKDIR /

# Rodetas repository git configuring

RUN ls
RUN git clone https://github.com/rodetas/vsss-rodetas-LARC-2020-FiraSIM
RUN cd vsss-rodetas-LARC-2020-FiraSIM
WORKDIR /vsss-rodetas-LARC-2020-FiraSIM
WORKDIR /

# Running automated code

#RUN cd build
#WORKDIR /build
#RUN ./SDK-Rodetas -c yellow

# Clean apt

RUN apt-get clean


